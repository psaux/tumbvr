!function t(e,o,i){function r(s,a){if(!o[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(n)return n(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=o[s]={exports:{}};e[s][0].call(d.exports,function(t){var o=e[s][1][t];return r(o?o:t)},d,d.exports,t,e,o,i)}return o[s].exports}for(var n="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e){var o;!function(){"use strict";o=function(t,e,o,i,r,n){switch(n=n||function(){},this.assetList=t,e){case"obj":this.loadObj(o);break;case"dae":this.loadDae(o)}return this.addAssetMesh(e,o,i,r,n)},o.prototype.loadObj=function(t){var e=document.createElement("a-asset-item");e.setAttribute("id","asset_"+t+"-obj"),e.setAttribute("src","/public/assets/models/"+t+".obj"),this.assetList.appendChild(e);var o=document.createElement("a-asset-item");o.setAttribute("id","asset_"+t+"-mtl"),o.setAttribute("src","/public/assets/models/"+t+".mtl"),this.assetList.appendChild(o)},o.prototype.loadDae=function(t){var e=document.createElement("a-asset-item");e.setAttribute("id","asset_"+t+"-dae"),e.setAttribute("src","/public/assets/models/"+t+".dae"),this.assetList.appendChild(e)},o.prototype.addAssetMesh=function(t,e,o,i,r){o=o||new THREE.Vector3,i=i||new THREE.Vector3(1,1,1);var n=document.createElement("a-entity");switch(n.setAttribute("id","mesh_"+e),t){case"obj":n.setAttribute("obj-model","obj: #asset_"+e+"-obj; mtl: #asset_"+e+"-mtl");break;case"dae":n.setAttribute("collada-model","#asset_"+e+"-dae")}return n.setAttribute("position",o),n.setAttribute("scale",i),document.querySelector("a-scene").appendChild(n),n.addEventListener("loaded",r),n}}(),e.exports=o},{}],2:[function(t,e){var o;!function(){"use strict";o=function(t){this.leftController=document.querySelector("#leftController"),this.rightController=document.querySelector("#rightController"),this.ground=document.querySelector("#colBox_0"),this.ballsArray=[],this.timeBack=4e3;for(var e=new THREE.Vector3,o=0,i=t.length;i>o;++o){var r=document.querySelector("#"+t[o]);e.copy(r.getAttribute("position")),e.y+=.5,this.ballsArray.push({entity:r,iniPos:(new THREE.Vector3).copy(e),timeoutBack:void 0}),r.addEventListener("collide",this.onCollide.bind(this))}},o.prototype.onCollide=function(t){var e=this;if(t.detail.body.el===document.querySelector("#colBox_0"))for(var o=0,i=this.ballsArray.length;i>o;++o)if(this.ballsArray[o].entity===t.detail.target.el){var r=this.ballsArray[o];console.log("Found the ball!",r),void 0===r.timeoutBack&&(r.timeoutBack=setTimeout(function(){e.putBallBack(r)},this.timeBack));break}},o.prototype.putBallBack=function(t){t.entity.pause(),t.entity.setAttribute("position",t.iniPos),t.entity.play(),clearTimeout(t.timeoutBack),t.timeoutBack=void 0}}(),e.exports=o},{}],3:[function(t,e){var o;!function(){"use strict";o=function(t,e){this.assetList=t,this.imgArray=[],this.nbFrames=Math.min(e.length,12),this.loadAssets(e),this.rotatingFrames=[],this.tempRot=new THREE.Vector3,this.onAssetsLoaded(),this.update()},o.prototype.loadAssets=function(t){for(var e=0;e<t.length;++e){var o=t[e].photos[0].original_size,i=document.createElement("img");i.setAttribute("id","img"+e),i.setAttribute("src",o.url),i.setAttribute("crossorigin","anonymous"),this.assetList.appendChild(i),this.imgArray.push({id:"img"+e,ratio:o.height/o.width})}},o.prototype.onAssetsLoaded=function(){for(var t=document.querySelector("a-scene"),e=document.querySelector("#mesh_cavanagh").getObject3D("mesh"),o=e.children.filter(function(t){return-1!==t.name.indexOf("Plane")}),i=0;i<this.nbFrames;++i){var r=document.createElement("a-image");t.appendChild(r),r.addEventListener("collide",this.onCollide.bind(this));var n=new THREE.Vector3,s=new THREE.Vector3;o[i].geometry.computeBoundingSphere(),n.copy(o[i].geometry.boundingSphere.center),-1!==o[i].name.indexOf("Rotated")&&(s.y=90),r.setAttribute("position",n),r.setAttribute("rotation",s),this.addFrame(r,this.imgArray[i]),o[i].visible=!1}},o.prototype.addFrame=function(t,e){function o(){var o=Math.min(2,e.ratio<1?1.5/e.ratio:1.5),i=Math.min(2,e.ratio<1?1.5:1.5*e.ratio);t.setAttribute("width",o),t.setAttribute("height",i),t.setAttribute("src","#"+e.id)}var i=document.querySelector("#"+e.id);i.complete?o():i.addEventListener("load",o)},o.prototype.onCollide=function(t){this.rotatingFrames.push({rot:new THREE.Vector3,iniRot:(new THREE.Vector3).copy(t.detail.target.el.getAttribute("rotation")),imgEntity:t.detail.target.el,newAsset:this.imgArray[Math.round(Math.random()*(this.imgArray.length-1))]})},o.prototype.update=function(){for(var t=this.rotatingFrames.length-1;t>=0;--t){var e=this.rotatingFrames[t];e.rot.y<180?(e.rot.y++,e.imgEntity.setAttribute("rotation",this.tempRot.addVectors(e.rot,e.iniRot))):(this.addFrame(e.imgEntity,e.newAsset),this.rotatingFrames.pop())}requestAnimationFrame(this.update.bind(this))}}(),e.exports=o},{}],4:[function(t){!function(){"use strict";function e(){var t=navigator.getVRDisplays||navigator.getVRDevices;t&&navigator.getVRDisplays().then(function(t){t.length&&!t[0].capabilities.hasPosition&&t[0].isPresenting&&document.querySelector("[camera]").addEventListener("componentchanged",function(t){"position"===t.detail.name&&(document.querySelector("[camera]").getAttribute("position").y=1.6)})})}function o(t,e,i){i=i||function(){},document.querySelector("#"+t).getObject3D("mesh")instanceof e?i():setTimeout(function(){o(t,e,i)},250)}function i(t){var e=void 0;e=new n(c,"obj","cavanagh",new THREE.Vector3,new THREE.Vector3(t.x/a,1,t.z/a),function(){o("mesh_cavanagh",THREE.Group,function(){new r(c,tumbDatas.posts)})})}var r=t("./imageLoader.js"),n=t("./assetLoader.js"),s=t("./ballsManager.js"),a=7.92;THREE.ImageUtils.crossOrigin="anonymous",THREE.ImageUtils.loadTexture.crossOrigin="anonymous",THREE.ImageUtils.loadTexture.prototype.crossOrigin="anonymous",THREE.ImageUtils.loadTextureCube.prototype.crossOrigin="anonymous",THREE.ImageUtils.loadTextureCube.crossOrigin="anonymous",THREE.ImageUtils.loadTextureCube.prototype.crossOrigin="anonymous","SamsungChangeSky"in window&&window.SamsungChangeSky({sphere:"/public/samsung_background.jpg"});var u=document.querySelector("a-scene");u.addEventListener("enter-vr",e);var c=document.createElement("a-assets");u.appendChild(c);var d=new n(c,"dae","david",new THREE.Vector3(0,.1,2),new THREE.Vector3(.8,.8,.8));d.setAttribute("dynamic-body","shape: box; mass: 15"),d.setAttribute("rotation",new THREE.Vector3(0,90,0));var l=document.createElement("audio");l.setAttribute("id","amazingGrace2011"),l.setAttribute("src","public/sounds/amazingGrace2011.WAV"),c.appendChild(l);var m=new n(c,"obj","speaker",new THREE.Vector3(0,0,-1.05),new THREE.Vector3(.4,.4,.4));m.setAttribute("sound","src: #amazingGrace2011;loop:true"),i({x:a,z:a});var h=["ball1","ball2","ball3"];new s(h);for(var p=0;6>p;++p){var b=document.createElement("a-box");b.setAttribute("id","colBox_"+p),b.setAttribute("visible",!1),2>p?(b.setAttribute("width",8),b.setAttribute("height",.1),b.setAttribute("depth",8)):4>p?(b.setAttribute("width",.1),b.setAttribute("height",8),b.setAttribute("depth",8)):(b.setAttribute("width",8),b.setAttribute("height",8),b.setAttribute("depth",.1)),u.appendChild(b)}document.querySelector("#colBox_0").setAttribute("position",new THREE.Vector3(0,0,0)),document.querySelector("#colBox_1").setAttribute("position",new THREE.Vector3(0,2.8,0)),document.querySelector("#colBox_2").setAttribute("position",new THREE.Vector3(-4.1,1,0)),document.querySelector("#colBox_3").setAttribute("position",new THREE.Vector3(4.1,1,0)),document.querySelector("#colBox_4").setAttribute("position",new THREE.Vector3(0,1,4.1)),document.querySelector("#colBox_5").setAttribute("position",new THREE.Vector3(0,1,-4.1)),document.querySelector("#butOK").addEventListener("click",function(){document.querySelector("#amazingGrace2011").play()})}()},{"./assetLoader.js":1,"./ballsManager.js":2,"./imageLoader.js":3}]},{},[4]);