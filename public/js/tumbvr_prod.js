!function t(e,i,o){function r(n,a){if(!i[n]){if(!e[n]){var c="function"==typeof require&&require;if(!a&&c)return c(n,!0);if(s)return s(n,!0);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[n]={exports:{}};e[n][0].call(l.exports,function(t){var i=e[n][1][t];return r(i?i:t)},l,l.exports,t,e,i,o)}return i[n].exports}for(var s="function"==typeof require&&require,n=0;n<o.length;n++)r(o[n]);return r}({1:[function(t,e){var i;!function(){"use strict";i=function(t,e,i,o,r,s){switch(s=s||function(){},this.assetList=t,e){case"obj":this.loadObj(i);break;case"dae":this.loadDae(i)}return this.addAssetMesh(e,i,o,r,s)},i.prototype.loadObj=function(t){var e=document.createElement("a-asset-item");e.setAttribute("id","asset_"+t+"-obj"),e.setAttribute("src","/public/assets/models/"+t+".obj"),this.assetList.appendChild(e);var i=document.createElement("a-asset-item");i.setAttribute("id","asset_"+t+"-mtl"),i.setAttribute("src","/public/assets/models/"+t+".mtl"),this.assetList.appendChild(i)},i.prototype.loadDae=function(t){var e=document.createElement("a-asset-item");e.setAttribute("id","asset_"+t+"-dae"),e.setAttribute("src","/public/assets/models/"+t+".dae"),this.assetList.appendChild(e)},i.prototype.addAssetMesh=function(t,e,i,o,r){i=i||new THREE.Vector3,o=o||new THREE.Vector3(1,1,1);var s=document.createElement("a-entity");switch(s.setAttribute("id","mesh_"+e),t){case"obj":s.setAttribute("obj-model","obj: #asset_"+e+"-obj; mtl: #asset_"+e+"-mtl");break;case"dae":s.setAttribute("collada-model","#asset_"+e+"-dae")}return s.setAttribute("position",i),s.setAttribute("scale",o),document.querySelector("a-scene").appendChild(s),s.addEventListener("loaded",r),s}}(),e.exports=i},{}],2:[function(t,e){var i;!function(){"use strict";i=function(t){this.leftController=document.querySelector("#leftController"),this.rightController=document.querySelector("#rightController"),this.ground=document.querySelector("#colBox_0"),this.ballsArray=[],this.timeBack=4e3;for(var e=new THREE.Vector3,i=0,o=t.length;o>i;++i){var r=document.querySelector("#"+t[i]);e.copy(r.getAttribute("position")),e.y+=.5,this.ballsArray.push({entity:r,iniPos:(new THREE.Vector3).copy(e),timeoutBack:void 0}),r.addEventListener("collide",this.onCollide.bind(this))}},i.prototype.onCollide=function(t){var e=this;if(t.detail.body.el===document.querySelector("#colBox_0"))for(var i=0,o=this.ballsArray.length;o>i;++i)if(this.ballsArray[i].entity===t.detail.target.el){var r=this.ballsArray[i];console.log("Found the ball!",r),void 0===r.timeoutBack&&(r.timeoutBack=setTimeout(function(){e.putBallBack(r)},this.timeBack));break}},i.prototype.putBallBack=function(t){t.entity.pause(),t.entity.setAttribute("position",t.iniPos),t.entity.play(),clearTimeout(t.timeoutBack),t.timeoutBack=void 0}}(),e.exports=i},{}],3:[function(t,e){var i;!function(){"use strict";i=function(t,e){this.assetList=t,this.imgArray=[],this.nbFrames=Math.min(e.length,12),this.loadAssets(e),this.rotatingFrames=[],this.tempRot=new THREE.Vector3,this.onAssetsLoaded(),this.update()},i.prototype.loadAssets=function(t){for(var e=0;e<t.length;++e){var i=t[e].photos[0].alt_sizes[1],o=document.createElement("img");o.setAttribute("id","img"+e),o.setAttribute("src",i.url),o.setAttribute("crossorigin","anonymous"),this.assetList.appendChild(o),this.imgArray.push({id:"img"+e,ratio:i.height/i.width})}},i.prototype.onAssetsLoaded=function(){for(var t=document.querySelector("a-scene"),e=document.querySelector("#mainScene").getObject3D("mesh"),i=e.children.filter(function(t){return-1!==t.name.indexOf("Plane")}),o=0;o<this.nbFrames;++o){var r=document.createElement("a-image");t.appendChild(r),r.addEventListener("collide",this.onCollide.bind(this));var s=new THREE.Vector3,n=new THREE.Vector3;i[o].geometry.computeBoundingSphere(),s.copy(i[o].geometry.boundingSphere.center),-1!==i[o].name.indexOf("Rotated")&&(n.y=90),r.setAttribute("position",s),r.setAttribute("rotation",n),this.addFrame(r,this.imgArray[o]),i[o].visible=!1}},i.prototype.addFrame=function(t,e){function i(){var i=Math.min(2,e.ratio<1?1.5/e.ratio:1.5),o=Math.min(2,e.ratio<1?1.5:1.5*e.ratio);t.setAttribute("width",i),t.setAttribute("height",o),t.setAttribute("src","#"+e.id)}var o=document.querySelector("#"+e.id);o.complete?i():o.addEventListener("load",i)},i.prototype.onCollide=function(t){this.rotatingFrames.push({rot:new THREE.Vector3,iniRot:(new THREE.Vector3).copy(t.detail.target.el.getAttribute("rotation")),imgEntity:t.detail.target.el,newAsset:this.imgArray[Math.round(Math.random()*(this.imgArray.length-1))]})},i.prototype.update=function(){for(var t=this.rotatingFrames.length-1;t>=0;--t){var e=this.rotatingFrames[t];e.rot.y<180?(e.rot.y++,e.imgEntity.setAttribute("rotation",this.tempRot.addVectors(e.rot,e.iniRot))):(this.addFrame(e.imgEntity,e.newAsset),this.rotatingFrames.pop())}requestAnimationFrame(this.update.bind(this))}}(),e.exports=i},{}],4:[function(t){!function(){"use strict";function e(){var t=navigator.getVRDisplays||navigator.getVRDevices;t&&navigator.getVRDisplays().then(function(t){t.length&&!t[0].capabilities.hasPosition&&t[0].isPresenting&&document.querySelector("[camera]").addEventListener("componentchanged",function(t){"position"===t.detail.name&&(document.querySelector("[camera]").getAttribute("position").y=1.6)})})}var i=(t("./imageLoader.js"),t("./assetLoader.js")),o=t("./ballsManager.js");THREE.ImageUtils.crossOrigin="anonymous",THREE.ImageUtils.loadTexture.crossOrigin="anonymous",THREE.ImageUtils.loadTexture.prototype.crossOrigin="anonymous",THREE.ImageUtils.loadTextureCube.prototype.crossOrigin="anonymous",THREE.ImageUtils.loadTextureCube.crossOrigin="anonymous",THREE.ImageUtils.loadTextureCube.prototype.crossOrigin="anonymous","SamsungChangeSky"in window&&window.SamsungChangeSky({sphere:"/public/samsung_background.jpg"});var r=document.querySelector("a-scene");r.addEventListener("enter-vr",e);var s=document.createElement("a-assets");r.appendChild(s);var n=document.createElement("audio");n.setAttribute("id","amazingGrace2011"),n.setAttribute("src","public/sounds/amazingGrace2011.WAV"),s.appendChild(n);var a=new i(s,"obj","speaker",new THREE.Vector3(0,0,-1.05),new THREE.Vector3(.4,.4,.4));a.setAttribute("sound","src: #amazingGrace2011;loop:true");var c=["ball1","ball2","ball3"];new o(c);for(var u=0;6>u;++u){var l=document.createElement("a-box");l.setAttribute("id","colBox_"+u),l.setAttribute("visible",!1),2>u?(l.setAttribute("width",8),l.setAttribute("height",.1),l.setAttribute("depth",8)):4>u?(l.setAttribute("width",.1),l.setAttribute("height",8),l.setAttribute("depth",8)):(l.setAttribute("width",8),l.setAttribute("height",8),l.setAttribute("depth",.1)),r.appendChild(l)}document.querySelector("#colBox_0").setAttribute("position",new THREE.Vector3(0,0,0)),document.querySelector("#colBox_1").setAttribute("position",new THREE.Vector3(0,2.8,0)),document.querySelector("#colBox_2").setAttribute("position",new THREE.Vector3(-4.1,1,0)),document.querySelector("#colBox_3").setAttribute("position",new THREE.Vector3(4.1,1,0)),document.querySelector("#colBox_4").setAttribute("position",new THREE.Vector3(0,1,4.1)),document.querySelector("#colBox_5").setAttribute("position",new THREE.Vector3(0,1,-4.1)),document.querySelector("#butOK").addEventListener("click",function(){document.querySelector("#amazingGrace2011").play()}),console.log("David by Michelangelo(https://sketchfab.com/models/8f4827cf36964a17b90bad11f48298ac) by jerryfisher(https://sketchfab.com/jerryfisher) is licensed under CC Attribution(http://creativecommons.org/licenses/by/4.0/)"),console.log("Landscape gallery by @stoneysteiner(https://sketchfab.com/models/3702735762544e5796be4740cb6d5efc) by stoneysteiner(https://sketchfab.com/stoneysteiner) is licensed under CC Attribution(http://creativecommons.org/licenses/by/4.0/)")}()},{"./assetLoader.js":1,"./ballsManager.js":2,"./imageLoader.js":3}]},{},[4]);